{"version":3,"file":"vue-i18n.js","names":["useProxiedModel","toRef","watch","useProvided","props","prop","provided","internal","value","v","inferDecimalSeparator","format","includes","createProvideFunction","data","current","fallback","messages","i18n","useI18n","locale","fallbackLocale","useScope","legacy","inheritLocale","name","decimalSeparator","n","t","key","_len","arguments","length","params","Array","_key","provide","createVueI18nAdapter","_ref","global","_len2","_key2"],"sources":["../../../src/locale/adapters/vue-i18n.ts"],"sourcesContent":["// Composables\nimport { useProxiedModel } from '@/composables/proxiedModel'\n\n// Utilities\nimport { toRef, watch } from 'vue'\n\n// Types\nimport type { Ref } from 'vue'\nimport type { I18n, useI18n } from 'vue-i18n'\nimport type { LocaleInstance, LocaleMessages, LocaleOptions } from '@/composables/locale'\n\ntype VueI18nAdapterParams = {\n  i18n: I18n<any, {}, {}, string, false>\n  useI18n: typeof useI18n\n}\n\nfunction useProvided <T> (props: any, prop: string, provided: Ref<T>) {\n  const internal = useProxiedModel(props, prop)\n\n  internal.value = props[prop] ?? provided.value\n\n  watch(provided, v => {\n    if (props[prop] == null) {\n      internal.value = v\n    }\n  })\n\n  return internal as Ref<T>\n}\n\nfunction inferDecimalSeparator (format: (v: number) => string) {\n  return format(0.1).includes(',') ? ',' : '.'\n}\n\nfunction createProvideFunction (data: {\n  current: Ref<string>\n  fallback: Ref<string>\n  messages: Ref<LocaleMessages>\n  useI18n: typeof useI18n\n}) {\n  return (props: LocaleOptions): LocaleInstance => {\n    const current = useProvided(props, 'locale', data.current)\n    const fallback = useProvided(props, 'fallback', data.fallback)\n    const messages = useProvided(props, 'messages', data.messages)\n\n    const i18n = data.useI18n({\n      locale: current.value,\n      fallbackLocale: fallback.value,\n      messages: messages.value as any,\n      useScope: 'local',\n      legacy: false,\n      inheritLocale: false,\n    })\n\n    watch(current, v => {\n      i18n.locale.value = v\n    })\n\n    return {\n      name: 'vue-i18n',\n      current,\n      fallback,\n      messages,\n      decimalSeparator: toRef(() => props.decimalSeparator ?? inferDecimalSeparator(i18n.n)),\n      t: (key: string, ...params: unknown[]) => i18n.t(key, params),\n      n: i18n.n,\n      provide: createProvideFunction({ current, fallback, messages, useI18n: data.useI18n }),\n    }\n  }\n}\n\nexport function createVueI18nAdapter ({ i18n, useI18n }: VueI18nAdapterParams): LocaleInstance {\n  const current = i18n.global.locale\n  const fallback = i18n.global.fallbackLocale as Ref<any>\n  const messages = i18n.global.messages\n\n  return {\n    name: 'vue-i18n',\n    current,\n    fallback,\n    messages,\n    decimalSeparator: toRef(() => inferDecimalSeparator(i18n.global.n)),\n    t: (key: string, ...params: unknown[]) => i18n.global.t(key, params),\n    n: i18n.global.n,\n    provide: createProvideFunction({ current, fallback, messages, useI18n }),\n  }\n}\n"],"mappings":"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","ignoreList":[]}