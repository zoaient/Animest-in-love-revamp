{"version":3,"file":"reveal.js","names":["onMounted","shallowRef","toRef","propsFactory","makeRevealProps","reveal","type","Boolean","Object","default","useReveal","props","defaultDuration","duration","Math","max","Number","state","value","Promise","resolve","requestAnimationFrame","setTimeout"],"sources":["../../src/composables/reveal.ts"],"sourcesContent":["// Utilities\nimport { onMounted, shallowRef, toRef } from 'vue'\nimport { propsFactory } from '@/util'\n\n// Types\nimport type { PropType } from 'vue'\n\n// Types\nexport interface RevealProps {\n  reveal: boolean | { duration?: number }\n}\n\n// Composables\nexport const makeRevealProps = propsFactory({\n  reveal: {\n    type: [Boolean, Object] as PropType<boolean | {\n      duration?: number\n    }>,\n    default: false,\n  },\n}, 'reveal')\n\nexport function useReveal (props: RevealProps) {\n  const defaultDuration = 900\n  const duration = toRef(() => typeof props.reveal === 'object'\n    ? Math.max(0, Number(props.reveal.duration ?? defaultDuration))\n    : defaultDuration\n  )\n\n  const state = shallowRef(props.reveal ? 'initial' : 'disabled')\n\n  onMounted(async () => {\n    if (props.reveal) {\n      state.value = 'initial'\n      await new Promise(resolve => requestAnimationFrame(resolve))\n      state.value = 'pending'\n      await new Promise(resolve => setTimeout(resolve, duration.value))\n      state.value = 'done'\n    }\n  })\n\n  return {\n    duration,\n    state,\n  }\n}\n"],"mappings":"AAAA;AACA,SAASA,SAAS,EAAEC,UAAU,EAAEC,KAAK,QAAQ,KAAK;AAAA,SACzCC,YAAY,4BAErB;AAGA;AAKA;AACA,OAAO,MAAMC,eAAe,GAAGD,YAAY,CAAC;EAC1CE,MAAM,EAAE;IACNC,IAAI,EAAE,CAACC,OAAO,EAAEC,MAAM,CAEpB;IACFC,OAAO,EAAE;EACX;AACF,CAAC,EAAE,QAAQ,CAAC;AAEZ,OAAO,SAASC,SAASA,CAAEC,KAAkB,EAAE;EAC7C,MAAMC,eAAe,GAAG,GAAG;EAC3B,MAAMC,QAAQ,GAAGX,KAAK,CAAC,MAAM,OAAOS,KAAK,CAACN,MAAM,KAAK,QAAQ,GACzDS,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEC,MAAM,CAACL,KAAK,CAACN,MAAM,CAACQ,QAAQ,IAAID,eAAe,CAAC,CAAC,GAC7DA,eACJ,CAAC;EAED,MAAMK,KAAK,GAAGhB,UAAU,CAACU,KAAK,CAACN,MAAM,GAAG,SAAS,GAAG,UAAU,CAAC;EAE/DL,SAAS,CAAC,YAAY;IACpB,IAAIW,KAAK,CAACN,MAAM,EAAE;MAChBY,KAAK,CAACC,KAAK,GAAG,SAAS;MACvB,MAAM,IAAIC,OAAO,CAACC,OAAO,IAAIC,qBAAqB,CAACD,OAAO,CAAC,CAAC;MAC5DH,KAAK,CAACC,KAAK,GAAG,SAAS;MACvB,MAAM,IAAIC,OAAO,CAACC,OAAO,IAAIE,UAAU,CAACF,OAAO,EAAEP,QAAQ,CAACK,KAAK,CAAC,CAAC;MACjED,KAAK,CAACC,KAAK,GAAG,MAAM;IACtB;EACF,CAAC,CAAC;EAEF,OAAO;IACLL,QAAQ;IACRI;EACF,CAAC;AACH","ignoreList":[]}