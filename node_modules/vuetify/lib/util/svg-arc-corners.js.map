{"version":3,"file":"svg-arc-corners.js","names":["pointOnArc","center","radius","angle","radians","Math","PI","cos","sin","drawCircle","_ref","r","width","x","y","innerRadius","simpleArc","startAngle","endAngle","start","end","sweep","join","roundedArc","rounding","min","abs","innerR","circumference","innerR2","outerRadius","oStart","oEnd","iStart","iEnd","iSection","oSection","iArcStart","iArcEnd","oArcStart","oArcEnd","arcSweep1","arcSweep2"],"sources":["../../src/util/svg-arc-corners.ts"],"sourcesContent":["/*\n * Credits: Alexander Milevski https://github.com/w8r/svg-arc-corners\n */\n\ntype Point = [x: number, y: number]\n\nfunction pointOnArc (center: Point, radius: number, angle: number) {\n  const radians = (angle - 90) * Math.PI / 180.0\n  return [center[0] + radius * Math.cos(radians), center[1] + radius * Math.sin(radians)]\n}\n\nfunction drawCircle ([x, y]: Point, r: number, width: number) {\n  const innerRadius = r - width\n  return [\n    'M', x - r, y,\n    'A', r, r, 0, 1, 0, x + r, y,\n    'A', r, r, 0, 1, 0, x - r, y,\n    'M', x - innerRadius, y,\n    'A', innerRadius, innerRadius, 0, 1, 0, x + innerRadius, y,\n    'A', innerRadius, innerRadius, 0, 1, 0, x - innerRadius, y,\n    'Z',\n  ]\n}\n\nexport function simpleArc (center: Point, r: number, startAngle: number, endAngle: number) {\n  const start = pointOnArc(center, r, startAngle)\n  const end = pointOnArc(center, r, endAngle)\n  const sweep = endAngle - startAngle > 180 ? 1 : 0\n\n  return [\n    `M${start[0]} ${start[1]}`,\n    `A${r} ${r} 0 ${sweep} 1 ${end[0]} ${end[1]}`,\n    `L${center[0]} ${center[1]}Z`,\n  ]\n    .join(' ')\n}\n\nexport function roundedArc (center: Point, radius: number, startAngle: number, endAngle: number, width: number, rounding: number): string {\n  width = Math.min(radius, width)\n\n  if (Math.abs(endAngle - startAngle) === 360) {\n    return drawCircle(center, radius, width).join(' ')\n  }\n\n  if (rounding === 0 && radius === width) {\n    return simpleArc(center, radius, startAngle, endAngle)\n  }\n\n  const innerR = radius - width\n  const circumference = Math.abs(endAngle - startAngle)\n  rounding = Math.min(width / 2, rounding)\n\n  if (360 * (rounding / (Math.PI * (radius - width))) > Math.abs(startAngle - endAngle)) {\n    rounding = circumference / 360 * innerR * Math.PI\n  }\n\n  // inner and outer radiuses\n  const innerR2 = innerR + rounding\n  const outerRadius = radius - rounding\n\n  // butts corner points\n  const oStart = pointOnArc(center, outerRadius, startAngle)\n  const oEnd = pointOnArc(center, outerRadius, endAngle)\n\n  const iStart = pointOnArc(center, innerR2, startAngle)\n  const iEnd = pointOnArc(center, innerR2, endAngle)\n\n  const iSection = innerR ? 360 * (rounding / (2 * Math.PI * innerR)) : 0\n  const oSection = 360 * (rounding / (2 * Math.PI * radius))\n\n  // arcs endpoints\n  const iArcStart = pointOnArc(center, innerR, startAngle + iSection)\n  const iArcEnd = pointOnArc(center, innerR, endAngle - iSection)\n\n  const oArcStart = pointOnArc(center, radius, startAngle + oSection)\n  const oArcEnd = pointOnArc(center, radius, endAngle - oSection)\n\n  const arcSweep1 = circumference > 180 + 2 * oSection ? 1 : 0\n  const arcSweep2 = circumference > 180 + 2 * iSection ? 1 : 0\n\n  return [\n    // begin path\n    'M', oStart[0], oStart[1],\n    // outer start corner\n    'A', rounding, rounding, 0, 0, 1, oArcStart[0], oArcStart[1],\n    // outer main arc\n    'A', radius, radius, 0, arcSweep1, 1, oArcEnd[0], oArcEnd[1],\n    // outer end corner\n    'A', rounding, rounding, 0, 0, 1, oEnd[0], oEnd[1],\n    // end butt\n    'L', iEnd[0], iEnd[1],\n    // inner end corner\n    'A', rounding, rounding, 0, 0, 1, iArcEnd[0], iArcEnd[1],\n    // inner arc\n    'A', innerR, innerR, 0, arcSweep2, 0, iArcStart[0], iArcStart[1],\n    // inner start corner\n    'A', rounding, rounding, 0, 0, 1, iStart[0], iStart[1], 'Z', // end path\n  ]\n    .join(' ')\n}\n"],"mappings":"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","ignoreList":[]}